# PayRails Integration Product Manager Card Tokenization Task

This repository provides a flow to securely tokenize a customer's card details via PayRails using a Mockoon local host server, Postman, and a Python encryption script. Follow the steps below to successfully set up and run the process.

## Files in the Repository

1. **Postman Environment Variables**: Environment variables file for Postman, containing placeholders for API key, client ID, encrypted instrument details, and other variables used in the collection.
2. **Postman Requests Collection**: A collection of Postman requests to interact with the tokenization APIs.
3. **Encryption Python File**: A Python script to encrypt customer card details using a public key.

---

## Flow Steps

### 1. Download and Import Environment Variables
- Download the **Postman environment variables** file.
- Open Postman and import this file into your Postman environment.

### 2. Download and Import Postman Requests Collection
- Download the **Postman requests collection** file.
- Import it into Postman.

### 3. Update API Key and Client ID
- Go to the imported environment in Postman.
- Update the values for the `api_key` and `client_id` with your actual API key and client ID.

### 4. Run the Mockoon Localhost Server
- Set up and run your Mockoon server on your local machine. Ensure the server is running before proceeding to the next steps.

### 5. Get Authorization Token
- In Postman, run the **"Get Auth Token"** request from the imported collection.
- This request will retrieve an authorization token necessary for subsequent requests (will be used automatically by the prebuilt post-request scripts).

### 6. Update `holderReference`
- Before running the next request, update the `holderReference` parameter in the body of the **"Initialize Client"** request with the relevant value.

### 7. Initialize the Client
- Run the **"Initialize Client"** request in Postman.
- After this request is executed, proceed to the next step to retrieve the public key.

### 8. Retrieve the Public Key
- Open the Postman Console from the most lower bar and copy the generated `public_key`.

### 9. Modify the Python Encryption File
- Open the **Encryption Python file**.
- Paste the copied `public_key` from the previous step into the `public_key` parameter in the Python script.

### 10. Input Customer Card Data
- In the Python file, update the `data` parameter with the customer's card data that you want to tokenize.

### 11. Run the Python Encryption Script
- Run the Python script to encrypt the customer's card data.
- Copy the printed encrypted data that is generated by the script.

### 12. Update Postman Environment with Encrypted Data
- Go back to Postman and update the `encrypted_instrument_details` variable in the environment with the encrypted data you copied from the Python script.

### 13. Run the Final Request
- Now, run the third request **"Tokenize"** in Postman.

### 14. View the Token ID and Holder ID
- After running the final request, the generated **Token ID** and **Holder ID** will be printed in the Postman Console.

---

## Notes

- Ensure your local Mockoon server is properly configured and running throughout the process.
- The Python encryption file should be run with the proper environment for Python installed (Python 3.x recommended).
- Make sure all required packages are installed correctly 

## Requirements

- **Postman**: To run the requests and manage the environment.
- **Mockoon**: For simulating the local API server.
- **Python 3.x**: To run the encryption script.
- **cryptography package**: To import the package for Python 3.x run this on terminal `pip3 install cryptography`.
- **jose package**: To import the package for Python 3.x run this on terminal `pip3 install git+https://github.com/jkamp-aws/python-jose`.

---